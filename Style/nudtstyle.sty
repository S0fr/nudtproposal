%% 正文需要的宏
\usepackage{mdframed} % 页面边框
\usepackage{titlesec}   %设置页眉页脚的宏包
\usepackage{fancyhdr} % 页眉页脚
\usepackage{tabularx}  % 表格宽度
\usepackage{multirow} % 表格单元格合并
\usepackage{caption}   % 图表标题
% demo new tabular bibliography format
\usepackage{csquotes}
\usepackage[american]{babel}
%\usepackage[backend=biber, bibstyle=numeric, citestyle=numeric]{biblatex} % 设定引用格式
%\usepackage[backend=biber, style=caspervector,utf8, sorting=nty]{biblatex} % 设定引用格式
%\usepackage[backend=biber, style=Biblio/nudtcaspervector,utf8, sorting=none]{biblatex} % 设定引用格式
%\usepackage[backend=biber, style=gbt77142005, utf8]{biblatex} % 设定引用格式
\usepackage{longtable}

\usepackage{biblatex-ext-tabular}

% 重定义图表标题
%\renewcommand{\figurename}{图 } 
%\renewcommand{\tablename}{表 } 
\captionsetup[figure]{labelfont={},name={图 },labelsep=space}
\captionsetup[table]{labelfont={},name={表 },labelsep=space}

% 重定义标题格式
%\titleformat{command}[shape]{format}{label}{sep}{before-code}{after-code}
\titleformat{\section}{\heiti \zihao{-4}}{\thesection .}{5 pt}{}
\titlespacing*{\section} {0pt}{0ex}{.2ex} % 设置标题前后间距
\titleformat{\subsection}{\kaishu \zihao{5} \bfseries}{\thesubsection}{5 pt}{}
\titlespacing*{\subsection} {0pt}{0ex}{.2ex}
\titleformat{\subsubsection}{\kaishu \zihao{5}}{\thesubsubsection}{5 pt}{}
\titlespacing*{\subsubsection} {0pt}{0ex}{.2ex}
% 定义upcite
\newcommand{\upcite}[1]{\textsuperscript{ [\cite{#1}]  }} % 中文引用
%\newcommand{\upcite}[6]{\textsuperscript{ [\cite{#1,#2,#3,#4,#5,#6}] }} % 中文引用

\newcommand{\tabincell}[2]{\begin{tabular}{@{}#1@{}}#2\end{tabular}} % 单元格换行
% 首页图案
\schoollogo{scale=0.13}{nudt_logo_new}% university logo
\schooltext{scale=0.35}{nudt_text_new}% university text
% 定义字符串比较函数
\makeatletter
\def\instring#1#2{TT\fi\begingroup
	\edef\x{\endgroup\noexpand\in@{#1}{#2}}\x\ifin@}
\makeatother

\newcolumntype{L}[1]{%
	>{\raggedright\let\newline\\\arraybackslash\hspace{0pt}}m{#1}}

\newcolumntype{C}[1]{%
	>{\centering\let\newline\\\arraybackslash\hspace{0pt}}m{#1}}

\defbibtabular{bibtabular}
{\setlength{\LTpre}{0pt}%
	\setlength{\LTpost}{0pt}%
	\renewcommand*{\arraystretch}{1}%
	\begin{longtable}{%
			@{}
			|p{0.10\textwidth} < {\centering}|
			p{0.85\textwidth}|
			@{}}
		\hline
			{\songti 序号}  & \multicolumn{1}{c|}{\songti 文献目录(作者、题目、刊物名、出版时间、页次)} \\
		\hline
		\endfirsthead}
	{\end{longtable}}
{\anchor{\mkgbnumlabel{\printfield{labelnumber}}}
	& \driver{} \\\hline}

\addbibresource{Biblio/ref.bib}


\newcommand\enabletablebib[1]{%	
	\ifstrequal{#1}{yes}{\newcommand\printbib{\printbibtabular[title={~}]}	}{	\newcommand\printbib{\printbibliography[title={~}]}}
}
